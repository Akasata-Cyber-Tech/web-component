<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
    <link
      rel="stylesheet"
      href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css"
    />
    <script
      src="https://code.jquery.com/jquery-3.7.0.js"
      integrity="sha256-JlqSTELeR4TLqP0OG9dxM7yDPqX1ox/HfgiSLBj8+kM="
      crossorigin="anonymous"
    ></script>

    <script src="data2.js"></script>
  </head>
  <body>
    <!-- <table id="example" class="display" style="width: 100%">
      <thead>
        <tr>
          <th>CreatedBy</th>
          <th>CreateDate</th>
          <th>Id</th>
          <th>Password</th>
          <th>Url</th>
          <th>Username</th>
        </tr>
      </thead>
      <tbody id="tdata">
        
        
      </tbody>
      <tfoot id="tfot">
        <tr>
          <th>Count</th>
          <th>Code</th>
          <th>Message</th>
          <th>Description</th>
          
        </tr>
      </tfoot>
    </table> -->

    <div class="col-lg-10 position-absolute top-50 start-50 translate-middle">
      <div class="card">
        <div class="card-body">
          <h4 class="header-title">Contoh Data User</h4>

          <div class="table-responsive">
            <table class="table mb-0">
              <thead>
                <tr>
                  <th>CreateBy</th>
                  <th>CreatedDate</th>
                  <th>Id</th>
                  <th>Password</th>
                  <th>Url</th>
                  <th>Username</th>
                </tr>
              </thead>
              <tbody id="tdata"></tbody>
              <tfoot>
                <div class="d-flex gap-3">
                  <button type="button" class="btn btn-primary">Update</button>
                  <button type="button" class="btn btn-success">Tambah</button>
                  <button type="button" class="btn btn-danger">Delete</button>
                </div>
              </tfoot>
            </table>
          </div>
        </div>
      </div>
      <div class="wrapper mb-3">
        <div class="content">
          <div class="row">
            <div class="col-md-12">
              <h3 class="description">Tambah Datamu Disini</h3>
            </div>
            <div class="col-md-12">
              <form class="" action="">
                <div id="barisan" class="d-flex row gap-2">
                  <div class="d-flex gap-2 inputan">
                    <input
                      class="input"
                      placeholder="Username"
                      name="Username[]"
                      id="Username"
                      required=""
                      type="text"
                    />
                    <input
                      class="input"
                      placeholder="Password"
                      name="Password[]"
                      id="Password"
                      type="text"
                    />
                    <input
                      class="input"
                      placeholder="Url"
                      name="Url[]"
                      id="Url"
                      type="text"
                    /><button id="tambahin" class="btn btn-success">
                      Add More
                    </button>
                  </div>
                </div>

                <!-- <input id="pencet" class="input mt-2" placeholder="Nama" name="pencet" type="submit"> -->
              </form>
              <button id="submitData" class="btn btn-success col-1 mt-2">
                  Submit
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script>
      $(document).ready(function () {
        // $("#example").DataTable();

        $(document).on("click", "#submitData", function (add) {
          let data1 = $("#Username").val();
          let data2 = $("#Password").val();
          let data3 = $("#Url").val();
          // var formData = {"userName" : "data1", "password": "data2", "Url": "data3"};

          let inputForms = {
            CreateBy: "Admin",
            CreateDate: "2029-05-29T00:00:00",
            Id: "47c855d7-6dc7-47df-ae31-4e07ab408fda",
            Password: data2,
            Url: data3,
            Username: data1,
          };

          dataJSON.List.push(inputForms);
          console.log(inputForms);
          console.log(dataJSON);
          $('#tdata').empty();
          displayData(dataJSON);

          // displayData(dataJSON);

          // function forms(formData) {
          // $("#tdata").append("<tr class=>" + "<td>" + data1 + "</td"+"<tr>" + "<td>" + data2 + "</td"+"<tr>" + "<td>" + data3 + "</td>"+"<tr>" );
          // }
          // add.preventDefault();
          // let row_item = $(this);
          // forms();
        });

        const createData = () => {
          const username = $('#Username').val();
          const password = $('#Password').val();
          const url      = $('#Url').val();

          const newData  = {username, password, url}
          dataJSON.List.push(newData)
        }



        function displayData(data) {
          // JSON PARSE
          const parsedList = JSON.parse(JSON.stringify(dataJSON.List));

          //   cek tipe data
          //   console.log(typeof data);

          // Looping Object
          //   Object.keys(data).forEach(function (key) {
          //     console.log(data[key]);
          //     console.log(data.Count)

          //   });

          parsedList.forEach(data => {
            $("#tdata").append(
              "<tr class=>" +
                "<td>" +
                data.CreateBy +
                "</td" +
                "<tr>" +
                "<td>" +
                data.CreateDate +
                "</td" +
                "<tr>" +
                "<td>" +
                data.Id +
                "</td" +
                "<tr>" +
                "<td>" +
                data.Password +
                "</td" +
                "<tr>" +
                "<td>" +
                data.Url +
                "</td" +
                "<tr>" +
                "<td>" +
                data.Username +
                "</td" +
                "<tr>"
            );
          });

          //   cek variable
          //   console.log(parsedList);
      }

        displayData(dataJSON);
      });
    </script>
    <script>
      var isianDiv = `<div class="d-flex gap-2 inputan">
            		<input class="input" placeholder="Username" name="Username[]" required type="text">
          <input class="input" placeholder="Password" name="Password[]" type="text" ><input class="input" placeholder="Url" name="Url[]" type="text" ><button id="kurangin" class="btn btn-danger">Remove</button><button onclick id="tambahin2" class="btn btn-success">Add More</button>
            	</div>`;

      

      function submitData() {
        let data1 = $("#Username").val();
        let data2 = $("#Password").val();
        let data3 = $("#Url").val();

        var formData = { userName: data1, password: data2, Url: data3 };
        add.preventDefault();
        let row_item = $(this).parent();

        $("#barisan").append(isianDiv);

        // $.ajax({
        //     url: '/data2.js',
        //     type: 'POST',
        //     data : JSON.stringify(formData),
        //     contentType: 'application/json',
        //     success: function(response){
        //         console.log('data berhasil ditambahkan')
        //      },
        //     error: function(error){
        //       console.log("error" + error)
        //     }
        // });

        // $.ajax({
        //   type: "POST",
        //   dataType: "json",
        //   data: formData,
        //   success: function (response) {
        //     dataJSON = formData;
        //   }
        // })
      }

      $(document).ready(function () {
        $("#tambahin").click(function (add) {
          add.preventDefault();
          $("#barisan").append(isianDiv);
        });

        $(document).on("click", "#kurangin", function (del) {
          del.preventDefault();
          let row_item = $(this).parent();
          $(row_item).remove();
        });
        $(document).on("click", "#tambahin2", function (add) {
          add.preventDefault();
          let row_item = $(this).parent();

          $("#barisan").append(isianDiv);
        });
      });
    </script>
  </body>
</html>
